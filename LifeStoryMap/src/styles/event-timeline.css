/* Event Timeline */
.event-timeline {
  width: 100%;
  max-width: 360px;
  margin: 0 auto 1rem;
  padding: 0 0.5rem;
  box-sizing: border-box;
}

.event-timeline-container {
  width: 100%;
  height: 50px;
  padding: 0.75rem 0.25rem;
  background: #f5f5f5;
  border-radius: 2rem;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  box-sizing: border-box;
  overflow: hidden;
}

.event-timeline-track {
  position: relative;
  width: 100%;
  height: 100%;
  /* Reduce this to bring timeline circles closer together (e.g. 60%..90%). */
  --timeline-spread: 75%;
  /* Extra push away from the center capsule (bigger = more gap near the capsule). */
  --timeline-capsule-offset: clamp(6px, 1vw, 100px);
}

.timeline-item {
  position: absolute;
  top: 50%;
  /* Slots are 0..8 with the capsule at 4; compress spacing around the center. */
  left: calc(50% + ((var(--slot) - 4) / 8) * var(--timeline-spread));
  transform: translate(-50%, -50%);
  transition:
    left 0.4s ease-in-out,
    transform 0.4s ease-in-out,
    width 0.4s ease-in-out,
    height 0.4s ease-in-out,
    border-radius 0.4s ease-in-out,
    background-color 0.4s ease-in-out,
    border-color 0.4s ease-in-out,
    opacity 0.25s ease-in-out;
}

/* Push dots a bit away from the capsule (center) */
.timeline-item.timeline-upcoming {
  transform: translate(calc(-50% - var(--timeline-capsule-offset)), -50%);
}

.timeline-item.timeline-past {
  transform: translate(calc(-50% + var(--timeline-capsule-offset)), -50%);
}

.timeline-circle {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  box-shadow: 0 2px 2px rgba(0, 0, 0, 0.2);
}

.timeline-circle.timeline-upcoming {
  border: 3px solid #555555;
  background: #f0e4d0;
}

.timeline-circle.timeline-past {
  background: #e5e7eb;
  box-shadow: 0 2px 2px rgba(0, 0, 0, 0.2), inset 0 2px 5px rgba(0,0,0,0.3);
  border: 0;
}

.timeline-circle.empty {
  opacity: 0.25;
}

.timeline-circle.has-event {
  opacity: 1;
}

.timeline-capsule {
  width: 64px;
  height: 26px;
  border-radius: 999px;
  background: #f0e4d0;
  border: 4px solid #555555;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2;
  box-shadow: 0 4px 2px rgba(0, 0, 0, 0.2);
  /* Keep these in sync with the open animation so text can reveal afterwards */
  --capsule-open-duration: 420ms;
}

.timeline-capsule-text {
  font-size: 1rem;
  font-weight: 700;
  color: #111827;
  user-select: none;
  line-height: 1;
  will-change: transform, opacity, filter;
}

@keyframes timelineCapsuleOpen {
  0% {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    opacity: 0.9;
  }
  55% {
    width: 64px;
    height: 12px;
    border-radius: 999px;
    opacity: 1;
  }
  100% {
    width: 64px;
    height: 32px;
    border-radius: 999px;
    opacity: 1;
  }
}

.timeline-capsule.anim-forward,
.timeline-capsule.anim-backward {
  animation: timelineCapsuleOpen var(--capsule-open-duration) ease-in-out both;
}

@keyframes timelineYearReveal {
  0% {
    opacity: 0;
    transform: translateY(8px) scale(0.82);
    filter: blur(6px);
  }
  60% {
    opacity: 1;
    transform: translateY(-2px) scale(1.04);
    filter: blur(0px);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
    filter: blur(0px);
  }
}

/* Hide year during capsule open; reveal after open completes */
.timeline-capsule.anim-forward .timeline-capsule-text,
.timeline-capsule.anim-backward .timeline-capsule-text {
  animation: timelineYearReveal 520ms cubic-bezier(0.2, 0.9, 0.2, 1) both;
  animation-delay: var(--capsule-open-duration);
}

@media (prefers-reduced-motion: reduce) {
  .timeline-item {
    transition: none;
  }

  .timeline-capsule.anim-forward,
  .timeline-capsule.anim-backward,
  .timeline-capsule.anim-forward .timeline-capsule-text,
  .timeline-capsule.anim-backward .timeline-capsule-text {
    animation: none;
  }
}

@media (max-width: 768px) {
  .event-timeline {
    max-width: 100%;
    padding: 0 1rem;
  }

  .event-timeline-container {
    height: 56px;
    padding: 0.65rem 0.85rem;
  }

  .timeline-capsule {
    width: 60px;
    height: 28px;
  }

  .timeline-capsule-text {
    font-size: 0.85rem;
  }

  .timeline-circle {
    width: 11px;
    height: 11px;
  }
}

